<template>
  <div class="modal-overlay flex fixed justify-center  items-center z-10" @click="$emit('close-modal')">
    <div class="modal bg-white justify-center rounded-lg	items-center" @click.stop>
      <div class="relative" @click="$emit('close-modal')">
        <svg class="absolute right-5 top-5" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.51339 6.99915L13.0835 2.42733C13.2845 2.22666 13.3974 1.95443 13.3975 1.67054C13.3976 1.38664 13.2848 1.11433 13.0841 0.913519C12.8833 0.712704 12.6109 0.599831 12.3268 0.599732C12.0428 0.599632 11.7703 0.712313 11.5694 0.912986L6.99926 5.48267L2.42806 0.915118C2.22741 0.714585 1.95528 0.601927 1.67152 0.601927C1.38776 0.601927 1.11563 0.714585 0.914985 0.915118C0.71434 1.11565 0.601617 1.38763 0.601617 1.67122C0.601617 1.95482 0.71434 2.2268 0.914985 2.42733L5.48512 6.99701L0.914985 11.5667C0.713633 11.7672 0.600233 12.0395 0.599733 12.3236C0.599233 12.6077 0.711673 12.8803 0.912319 13.0816C1.11296 13.2828 1.38538 13.3961 1.66964 13.3966C1.95389 13.3971 2.2267 13.2848 2.42806 13.0842L6.99819 8.51456L11.5694 13.0842C11.6689 13.1836 11.787 13.2624 11.9169 13.3162C12.0469 13.3699 12.1862 13.3975 12.3268 13.3975C12.4675 13.3974 12.6067 13.3697 12.7367 13.3159C12.8666 13.262 12.9846 13.1831 13.0841 13.0837C13.1835 12.9843 13.2623 12.8662 13.3161 12.7364C13.3699 12.6065 13.3975 12.4673 13.3975 12.3267C13.3974 12.1861 13.3697 12.0469 13.3158 11.9171C13.262 11.7872 13.183 11.6693 13.0835 11.5699L8.51339 6.99915Z" fill="#595959"/>
        </svg>
      </div>
      <div class="px-8 md:px-16">
        <div class="brand flex justify-center my-3">
          <span>H</span>
          <span>i</span>
          <span class="text-black">S</span>
          <span class="text-black">K</span>
          <span class="text-black">I</span>
          <span class="text-black">O</span>
        </div>
        <div class="flex justify-evenly">
          <h2 class="underline font-medium login-title">
            登入
          </h2>
          <h2 class="font-medium login-register">
            註冊
          </h2>
        </div>
        <button class="log-in-btn border rounded-xl my-2 p-2 w-full flex items-center">
          <svg class="mr-3" width="22" height="22" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M28 26.25C27.9997 26.714 27.8153 27.159 27.4871 27.4871C27.159 27.8153 26.714 27.9997 26.25 28H1.75C1.28595 27.9997 0.840987 27.8153 0.512856 27.4871C0.184725 27.159 0.000264943 26.714 0 26.25L0 1.75C0.000264943 1.28595 0.184725 0.840987 0.512856 0.512856C0.840987 0.184725 1.28595 0.000264943 1.75 0L26.25 0C26.714 0.000264943 27.159 0.184725 27.4871 0.512856C27.8153 0.840987 27.9997 1.28595 28 1.75V26.25Z" fill="#3B5998"/>
          <path d="M19.249 28V17.5H22.749L23.624 13.123H19.249V11.365C19.1989 11.0089 19.2322 10.6461 19.3462 10.3051C19.4602 9.96405 19.6519 9.65418 19.9061 9.39988C20.1603 9.14557 20.4701 8.95377 20.8111 8.83961C21.1521 8.72544 21.5149 8.69203 21.871 8.74199H23.622V4.36499H20.122C16.908 4.36499 14.871 6.88699 14.871 10.493V13.119H11.371V17.496H14.871V27.996L19.249 28Z" fill="white"/>
          </svg>
          <span>使用 Facebook 登入</span>
        </button>
        <button class="log-in-btn border rounded-xl my-2 p-2 w-full flex items-center">
          <svg class="mr-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="22" height="22">
            <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z" />
            <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z" />
            <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z" />
            <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z" />
          </svg>
          <span>使用 Google 登入</span>
        </button>
        <button class="log-in-btn border rounded-xl my-2 p-2 w-full flex items-center">
          <svg class="mr-3" width="22" height="22" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M25 0H3C2.20435 0 1.44129 0.316071 0.87868 0.87868C0.31607 1.44129 0 2.20435 0 3L0 25C0 25.7956 0.31607 26.5587 0.87868 27.1213C1.44129 27.6839 2.20435 28 3 28H25C25.7956 28 26.5587 27.6839 27.1213 27.1213C27.6839 26.5587 28 25.7956 28 25V3C28 2.20435 27.6839 1.44129 27.1213 0.87868C26.5587 0.316071 25.7956 0 25 0ZM17.331 23.981C16.806 24.075 16.612 23.75 16.612 23.481C16.612 23.143 16.625 21.419 16.625 20.025C16.6535 19.6731 16.6051 19.3192 16.4832 18.9878C16.3613 18.6564 16.1688 18.3556 15.919 18.106C18.232 17.85 20.669 17.531 20.669 13.537C20.6755 13.078 20.5834 12.6229 20.399 12.2025C20.2146 11.7821 19.9421 11.4061 19.6 11.1C19.915 10.182 19.8772 9.17967 19.494 8.288C18.625 8.019 16.638 9.407 16.638 9.407C14.9361 8.94033 13.1399 8.94033 11.438 9.407C11.438 9.407 9.45 8.019 8.581 8.287C8.19468 9.17831 8.15685 10.1821 8.475 11.1C8.14623 11.4118 7.88885 11.791 7.72055 12.2117C7.55225 12.6324 7.47701 13.0845 7.5 13.537C7.5 17.512 9.831 17.85 12.144 18.106C11.7666 18.4787 11.532 18.972 11.481 19.5C11.2266 19.645 10.9458 19.7376 10.6551 19.7724C10.3643 19.8071 10.0696 19.7833 9.78819 19.7023C9.50681 19.6213 9.2445 19.4848 9.01673 19.3008C8.78896 19.1168 8.60034 18.8891 8.462 18.631C8.29566 18.3429 8.06549 18.0967 7.78916 17.9114C7.51284 17.726 7.19772 17.6065 6.868 17.562C5.856 17.549 6.799 18.2 6.799 18.2C7.474 18.513 7.949 19.713 7.949 19.713C8.555 21.569 11.455 20.944 11.455 20.944C11.455 21.813 11.467 23.225 11.467 23.481C11.467 23.737 11.28 24.075 10.748 23.981C8.6887 23.2764 6.90332 21.9417 5.64482 20.1659C4.38632 18.3902 3.71851 16.2634 3.736 14.087C3.71214 12.7521 3.95804 11.4262 4.45896 10.1886C4.95987 8.95105 5.70549 7.82736 6.65113 6.8849C7.59677 5.94243 8.72296 5.20059 9.9622 4.70384C11.2014 4.20709 12.5282 3.96565 13.863 3.994C15.2114 3.96113 16.5528 4.1976 17.8086 4.68957C19.0645 5.18153 20.2096 5.9191 21.1769 6.8591C22.1441 7.79909 22.9142 8.92261 23.4418 10.1639C23.9695 11.4052 24.2443 12.7392 24.25 14.088C24.2883 16.2562 23.6397 18.3809 22.3968 20.1579C21.154 21.935 19.3808 23.2732 17.331 23.981ZM11.2 20.163C11.081 20.188 10.969 20.138 10.956 20.057C10.943 19.976 11.025 19.882 11.144 19.857C11.263 19.832 11.375 19.894 11.388 19.976C11.401 20.058 11.325 20.137 11.2 20.163ZM10.606 20.107C10.606 20.188 10.512 20.257 10.387 20.257C10.262 20.257 10.156 20.201 10.156 20.107C10.156 20.013 10.25 19.957 10.375 19.957C10.5 19.957 10.606 20.012 10.606 20.106V20.107ZM9.75 20.038C9.725 20.119 9.6 20.157 9.494 20.119C9.388 20.081 9.294 20 9.319 19.919C9.344 19.838 9.469 19.8 9.575 19.825C9.7 19.862 9.781 19.956 9.75 20.038ZM8.981 19.7C8.925 19.769 8.806 19.756 8.712 19.663C8.618 19.57 8.593 19.463 8.656 19.407C8.719 19.351 8.831 19.351 8.925 19.445C9.019 19.539 9.037 19.65 8.981 19.7ZM8.412 19.131C8.356 19.168 8.249 19.131 8.181 19.037C8.113 18.943 8.112 18.837 8.181 18.793C8.25 18.749 8.356 18.78 8.412 18.874C8.44547 18.9082 8.46421 18.9541 8.46421 19.002C8.46421 19.0499 8.44547 19.0958 8.412 19.13V19.131ZM8.006 18.525C7.95 18.581 7.856 18.55 7.787 18.487C7.718 18.406 7.706 18.312 7.762 18.268C7.818 18.224 7.912 18.243 7.981 18.306C8.05 18.387 8.062 18.481 8.006 18.525ZM7.587 18.062C7.57781 18.076 7.56576 18.0878 7.55164 18.0968C7.53753 18.1057 7.52168 18.1116 7.50513 18.1139C7.48859 18.1163 7.47173 18.1151 7.45567 18.1105C7.43962 18.1058 7.42473 18.0978 7.412 18.087C7.331 18.049 7.293 17.981 7.318 17.924C7.34051 17.9014 7.36976 17.8868 7.40132 17.8823C7.43289 17.8777 7.46507 17.8836 7.493 17.899C7.575 17.944 7.612 18.012 7.587 18.062Z" fill="black"/>
          </svg>
          <span>使用 Github 登入</span>
        </button>
        <button class="log-in-btn border rounded-xl my-2 p-2 w-full flex items-center">
          <svg class="mr-3" width="22" height="22" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.172 28L3.828 28C2.81275 28 1.83908 27.5967 1.12119 26.8788C0.403305 26.1609 0 25.1872 0 24.172L0 3.828C0 2.81275 0.403305 1.83908 1.12119 1.12119C1.83908 0.403305 2.81275 0 3.828 0L24.172 0C25.1872 0 26.1609 0.403305 26.8788 1.12119C27.5967 1.83908 28 2.81275 28 3.828L28 24.172C28 25.1872 27.5967 26.1609 26.8788 26.8788C26.1609 27.5967 25.1872 28 24.172 28V28Z" fill="#017BBE"/>
<path d="M8.42001 10.389H4.08801V23.805H8.42001V10.389Z" fill="white"/>
<path d="M6.282 8.457C6.70255 8.45285 7.11248 8.32437 7.46014 8.0877C7.80781 7.85104 8.07767 7.51679 8.23575 7.12706C8.39382 6.73732 8.43305 6.30951 8.34846 5.89753C8.26388 5.48555 8.05928 5.10781 7.76044 4.81188C7.46159 4.51596 7.08186 4.31508 6.66907 4.23454C6.25628 4.154 5.82889 4.1974 5.44072 4.35929C5.05255 4.52118 4.72097 4.79431 4.48773 5.14428C4.25449 5.49425 4.13003 5.90543 4.13 6.326C4.13292 6.89392 4.36123 7.43743 4.76479 7.83705C5.16834 8.23666 5.71407 8.45965 6.282 8.457Z" fill="white"/>
<path d="M23.9071 16.392C23.9757 15.5459 23.8741 14.6945 23.6083 13.8883C23.3424 13.0821 22.9176 12.3373 22.3591 11.698C21.4761 10.825 21.029 10.414 18.879 10.414C18.1092 10.4435 17.3547 10.6379 16.6665 10.9842C15.9783 11.3304 15.3725 11.8204 14.8901 12.421V10.456H10.4771V23.74H14.8901V16.167C14.8599 15.8767 14.8925 15.5832 14.9856 15.3065C15.0786 15.0299 15.23 14.7764 15.4295 14.5633C15.629 14.3502 15.8719 14.1823 16.1418 14.0712C16.4117 13.96 16.7023 13.9081 16.994 13.919C17.3363 13.921 17.6745 13.9927 17.9881 14.1297C18.3017 14.2667 18.584 14.4662 18.818 14.7159C19.0519 14.9657 19.2325 15.2605 19.3488 15.5824C19.465 15.9042 19.5144 16.2464 19.4941 16.588V23.74H23.9081V16.392H23.9071Z" fill="white"/>
          </svg>
          <span>使用 LinkedIn 登入</span>
        </button>
        <div class="log-in-by-hiskio-id flex justify-center mb-2 text-base">
          <p>使用 HiSKIO 登入</p>
        </div>
        <form class="flex flex-col gap-2">
          <input v-model="user.account" class="p-2 rounded-xl border bg-gray-100" type="text" name="account" placeholder="請輸入HiSKIO ID">
          <input v-model="user.password" class="p-2 rounded-xl border bg-gray-100" type="password" name="password" placeholder="請輸入登入密碼">
        </form>
        <div class="text-xs py-4 flex items-center">
          <input type="checkbox">
          <span class="ml-1">登入註冊即代表您同意<span class="underline	">使用者及隱私權政策</span></span>
        </div>
        <button class="btn rounded" @click="submitForm">
          <span>登入</span>
        </button>
        <div class="my-3 text-xs flex justify-center">
          <p>忘記密碼</p>
        </div>
      </div>
    </div>
    
  </div>
</template>

<script>
export default {
  data() {
    return {
      user:{
        account: '',
        password: '',
        confirm:true
      },
      userInfo: {
        token: '',
      }
    }
  },
  methods: {
    submitForm() {
      fetch('https://api.hiskio.com/v2/auth/login', {
        method: 'POST',
        headers: {
          'accept': 'application/json',
          'content-type': 'application/json'
        },
        body: JSON.stringify(this.user),
      })
      .then(response => response.json())
      .then(data => {
        console.log(data);
        document.cookie = `Token=${data.access_token} ;max-age=${data.expires_in}`;
        this.userInfo.token = document.cookie;
        console.log(this.userInfo.token);
        this.$emit('close-modal')
        this.$emit('logged-in')
      })
    }
  },
}
</script>

<style scoped>
.modal-overlay {
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: #000000da;
}

.brand {
  color: #178FAC;
  font-weight: bold;
}

.login-title {
  font-size: 32px;
  color: rgba(23, 143, 172, 1)
}
.login-register {
  font-size: 32px;
  color: rgba(217, 217, 217, 1);
}
.close {
  /* margin: 0 0 0 16px; */
  cursor: pointer;
}

.log-in-btn {
  width: 320px;
  height: 48px;
  padding-left: 68px;
}

.btn {
  background: rgba(23, 143, 172, 1);
  color: #FFFFFF;
  width: 291px;
  height: 21px;
  padding: 9px, 18px, 9px, 18px;
}

.log-in-by-hiskio-id {
  color: rgba(89, 89, 89, 1);
}
</style>